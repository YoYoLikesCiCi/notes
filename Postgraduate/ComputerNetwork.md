Computer Network
# Chapter1 -- 体系结构

$$ \left \{ \begin{matrix}概述  \left \{ \begin{matrix} 概念、组成、功能、分类 \\ 标准化工作及相关组织 \\ 性能指标 \end{matrix} \right. \\ 体系结构\&参考模型  \left \{ \begin{matrix} 分层结构 \\ 协议、接口、服务 \\ ISO/OSI模型\\ TCP/IP模型 \end{matrix} \right.\end{matrix} \right.$$ 

## 概念
是一个将分散的、具有独立功能的**计算机系统** ，通过**通信设备**与**线路**连接起来，由功能完善的**软件**实现**资源共享**和**信息传递**的系统.    

简而言之: 互联的、自治的计算机集合.

### 功能
1. <mark>数据通信 </mark> (传输文件,email)
2. <mark>资源共享 </mark> (print,teamviewer)
3. 分布式处理
4. 提高可靠性 (互为替代机)
5. 负载均衡


## 组成
### 1. 组成部分 
 硬件、软件、协议

### 2. 工作方式
 $$ \left \{ \begin{matrix}边缘部分 -- 用户直接使用  \left \{ \begin{matrix}C/S方式 //  P2P方式  \end{matrix} \right. \\ 核心部分 -- 为边缘部分服务 \end{matrix} \right.$$ 

### 3. 功能组成  
$$ \left \{ \begin{matrix}通信子网  -- 实现数据通信  \\ 资源子网 --  实现资源共享/数据处理 \end{matrix} \right.$$ 

## 分类 
### 按分布范围
  广域网WAN   
  城域网MAN   
  局域网LAN   
  个人局域网PAN   
### 按使用者分  
  公用网  
  专用网  
### 按交换技术分  
电路交换  
报文交换  
分组交换  
### 按拓扑结构分  
总线型  
星型  
环型  
网状型  
### 按传输技术分
广播式网络:  共享公共通信信道  
点对点网络:  使用分组存储转发和路由选择机制  


### 标准的分类
$$ \left \{ \begin{matrix}法定:OSI \\ 事实:TCP/IP\end{matrix} \right.$$ 

- ISO 国际标准化组织
- ITU 国际电信联盟
- IEEE 国际电子电气工程师协会
- IETF 因特网工程部 Internet Engineering Task Force

### RFC步骤,
1. 因特网草案 Internet Draft
2. 建议标准 Proposed Standard -- 开始成为RFC文档
3. 草案标准 Draft Standard
4. 因特网标准 Internet Standard

## 性能指标
### 速率
又叫 *数据率* or *比特率*        
比特: 1/0  位  
定义:连接在计算机网络上的<mark>主机</mark> 在数字信道上传达数据<mark>位数</mark> 的速率.  
单位: b/s    kb/s  Mb/s   Gb/s   Tb/s  
进制: $10^3$  
存储容量 $\rightarrow$  1  Byte(字节) = 8  bit    
 1KB = $2^{10}$ B = 1024B  =  1024*8`bit`

### 带宽
通信线路传送数据的<mark>能力</mark>  
单位时间A从网络的某一点到令一点所能通过的“最高数据率”   
b/s  kb/s

### 吞吐量
<mark>单位时间</mark> 通过<mark>某个网络(或信道、接口)</mark> 的数据量.  
b/s kb/s

### 时延
数据从网络(或链路)的一端传送到另一端所需的时间.

1. <mark>发送时延</mark> (又称传输时延)  
  从分组的第一比特算起,至该分组最后一个比特发送完毕所需的时间.  
  =分组长度/信道宽度
2. <mark>传播时延</mark>   
一个比特从链路的一端传送到另一端的时间.    
=信道长度/电磁波传播速度
3. <mark>排队时延</mark>   
分组在进入路由器后要先在输入队列中排队等待处理    
等待输出/输入链路可用
4. <mark>处理时延</mark>   
数据在交换结点为储存转发而进行的一些必要的处理所花费的时间.    
检错,找出口

### 时延带宽积
发送端发送的第一个比特即将到达终点时,发送端已经发送了多少个比特 <mark>(留在“线里”的数据)</mark>   
= 传播时延 x  信道带宽  

### 往返时延 RTT
Round Trip Time  
发送端从发送数据开始,到发送端收到来自接收端的确认,总共经历的时延.
$$ \left \{ \begin{matrix}往返传播时延 = 传播时延 x 2 \\ 末端处理时延 \end{matrix} \right.$$ 

### 信道利用率
某一信道有百分之多少的时间是有数据通过的.

## 1.2 体系结构&参考模型
### 分层结构
分层结构的基本原则:
1. 各层之间是独立的---- 各层之间相互独立,每层只实现一种相对独立的功能
2. 灵活性好 ----每层之间界面自然清晰,易于理解,相互交流尽可能少
3. 结构上可分割开----结构上可分割开,每层都采用最合适的技术来实现
4. 易于实现和维护----保持下层对上层的独立性,上层单向使用下层提供的服务
5. 能促进标准化工作----整个分层结构应该能促进标准化工作

#### 实体
弟n层中的活动元素称为<mark>n层实体,</mark> 同一层的实体叫<mark>对等实体</mark> .  

#### 协议
为进行网络中对等实体数据交换而建立的规则,标准或约定称为 <mark>网络协议 (水平)</mark>   

$$ \left \{ \begin{matrix}语法 : 规定传输数据的格式 \\ 语义: 规定所要完成的功能 \\  同步: 事件实现顺序的详细说明\end{matrix} \right.$$ 

#### 接口
又叫做 服务访问点SAP, Service Access Point  
同一结点内相邻两层间交换信息的连接点,是一个系统内部的规定.

#### 服务
下层为相邻上层提供的功能调用.   (垂直)   

![](http://picbed.yoyolikescici.cn/uPic/20201220201308.png)

### 总结
<mark>计算机网络体系结构</mark> 是计算机网络的<mark>各层及其协议</mark> 的集合.

### OSI模型
目的: 支持<mark>异构网络系统</mark> 的互联互通.  
1984年ISO提出 开放系统互联参考模型(OSI/RM)  

![](http://picbed.yoyolikescici.cn/uPic/20201220202726.png)

![](http://picbed.yoyolikescici.cn/uPic/20201220202851.png)

#### 应用层
所有能和用户交互产生网络流量的程序.  
FTP、 SMTP、 HTTP

#### 表示层
用于处理在两个通信系统中交换信息的表示方式(语法和语义)  
功能:
1. 数据格式变换
2. 数据加密解密
3. 数据压缩和恢复  
JPEG,ASCII

#### 会话层
向表示层实体/用户进程提供<mark>建立连接</mark> 并在连接上<mark>有序</mark> 地<mark>传输</mark> 数据.     
这是会话,也是建立同步(SYN)  -- 啥?    
功能:  
1. 建立、管理、终止会话 
2. 使用校验点可使会话在通信失效时从 <mark>校验点/同步点</mark> 继续恢复通信,实现数据同步.   ---   适用于传输大文件  
ADSP、ASP  

#### 传输层
负责主机中<mark>两个进程</mark> 的通信,即<mark>端到端</mark> 的通信.  
>单位: 报文段 or  用户数据报  

功能:  
1. 可靠传输、不可靠传输
2. 差错控制
3. 流量控制
4. 复用分用  
 > 复用:多个应用层进程可同时使用下面运输层的服务.  
 > 分用:运输层把收到的信息分别交付给上面应用层中相应的进程.

#### 网络层
主要任务是把<mark>分组</mark> 从源端传到目的端,为分组交换网上的不同主机提供通信服务.
> 单位:数据报

功能:
1. 路由选择(最佳路径)
2. 流量控制
3. 差错控制
4. 拥塞控制
 > 若所有结点都来不及接受分组,而要丢弃大量分组的话,网络就处于<mark>拥塞</mark> 状态.因此要采取一定措施,缓解这种拥塞.

IP、IPX、ICMP、IGMP、ARP、RARP、OSPF

#### 数据链路层
把网络层传下来的数据报<mark>组装成帧</mark>.  
> 单位:帧 frame

功能:
1. 成帧(定义开始和结束)
2. 差错控制 (帧错+位错)
3. 流量控制
4. 访问(接入)控制 -- 控制对信道的访问.  
SDLC、HDLC、PPP、STP  

#### 物理层
比特流转成电信号放到物理媒介上传输
> 单位:比特

功能:
1. 定义接口特性 (几个引脚,引脚怎么连接)
2. 定义传输模式 (单工、半双工、全双工)
3. 定义传输速率 (百兆网)
4. 比特同步 
5. 比特编码 (曼彻斯特编码)

RJ45、802.3

### TCP/IP参考模型
![](http://picbed.yoyolikescici.cn/uPic/20201220212903.png)


#### OSI与TCP相同点
1. 都分层
2. 基于独立的协议栈的概念
3. 可以实现异构网络互联

#### OSI与TCP的不同点
1. OSI定义三点:服务、协议、接口
2. OSI先出现,参考模型先于协议发明,不偏向特定协议
3. TCP/IP设计之初就考虑到异构网互联问题,将IP作为重要层次
4. 
|   | ISO/OSI参考模型  | TCP/IP模型  | 
|---|---|---|
| 网络层  |  无连接+面向连接 | 无连接 |  
| 传输层  |  面向连接  |  无连接+面向连接  |  

### 五层参考模型
综合了OSI 和 TCP/IP的优点
|  层次 |  应用  |  协议 | 
| --- | ---| ---|
| 应用层 | 支持各种网络应用 |  FTP、SMTP、HTTP |
| 传输层 | 进程-进程的数据传输 | TCP、UDP |
| 网络层 | 源主机到目的主机的数据分组路由与转发 | IP、ICMP、OSPF |
| 数据链路层 | 把网络层传下来的数据报组装成帧 | Ethernet、PPP |
|物理层 | 比特传输 | none |

![第一章知识总结](http://picbed.yoyolikescici.cn/uPic/20201220221119.png)

# Chapter2 物理层
![](http://picbed.yoyolikescici.cn/uPic/20201220221400.png)


物理层解决如何在连接各种计算机的传输媒体上<mark>传输数据比特流</mark> ,而不是指具体的传输媒体.   
物理层的主要任务:  确定与传输媒体接口有关的一些特性 $\rightarrow$定义标准  

 > 1. 机械特性:定义物理连接的特性,戈丁物理连接时所采用的规格、接口形状、引线树木、引脚数量和排列情况.  
 > 2. 电气特性:规定传输二进制位时,线路上信号的电压范围、阻抗匹配、传输速率和距离限制等.
 > 3. 功能特性:指明某条线上出现的某一电平表示何种意义,接口部件的信号线的用途.
 > 4. 规程特性(过程特性): 定义各条物理线路的工作规程和时序的关系.
 
![](http://picbed.yoyolikescici.cn/uPic/20201220222939.png)

- 通信目的: 传送消息
- 数据data:传送信息的实体,通常是有意义的符号序列.
- 信号:数据的电气/电磁的表现,是数据在传输过程中的存在形式.
 > 数字信号    
 > 模拟信号
- 信源:产生和发送数据的源头
- 信宿:接收数据的终点.
- 信道:信号的传输媒介
  - 按传输信号分:  模拟信道、数字信道
  - 按传输介质分:  无线信道、有线信道

### 三种通信方式:
1. 单工通信  
只有一个方向的通信而没有反方向的交互,仅需要一条信道.
2. 半双工通信/双向交替通信  
通信的双方都可以发送或接收信息,但任何一方都不能同时发送和接收,需要<mark>两条</mark> 信道.  
3. 全双工通信/双向同时通信  
通信双方可以同时发送和接受信息,也需要<mark>两条</mark> 信道.

### 数据传输方式:
1. 串行传输  
将表示一个字符的8位二进制数由低位到高位的顺序依次发送.  
速度慢,费用低,适合远距离
2. 并行传输  
将表示一个字符的8位二进制数同时通过8条信道发送.  
速度快,费用高,适合近距离

### 实现同步的传输/通信方式
1. 同步传输  
在同步传输的模式下,数据的传送是以一个**数据区块** 为单位,因此又被称为 区块传输.  
在传送数据时需要送出1个或多个同步字符,再送出整批的数据.  
![](http://picbed.yoyolikescici.cn/uPic/20201220225535.png)

2. 异步传输
异步传输将比特分成小组进行传送,小组可以是8位的1个字符或更长. 发送方可以在任何 时刻发送这些比特组,而接收方不知道它们会在什么时候到达.  
传送数据时,加一个字符起始位和一个字符终止位.  

![](http://picbed.yoyolikescici.cn/uPic/20201220230017.png)


### 码元
指用一个<mark>固定时长</mark> 的<mark>信号波形</mark> (数字脉冲),代表不同离散数值的基本波形,是数字通信中数字信号的计量单位,这个时长内的信号称为k进制码元,时长称为<mark>码元宽度.</mark>   
**一码元可以携带多个比特的信息量**   

##### 数字通信系统数据传输速率的两种表示方法  
###### 码元传输速率  
别名码元速率、波形速率、调制速率、符号速率等.  
单位时间内数字通信系统所传输的码元个数.  
>单位:波特(Baud).  

码元速率只与<mark>码元长度T</mark> 有关,与进制数无关. 

###### 信息传输速率  
单位时间内数字通信系统传输的<mark>二进制码元个数(即比特数)</mark>   

## 奈奎斯特定理 

### 影响失真程度的因素
1. 码元传输速率 高则大
2. 信号传输距离 远则大
3. 噪声干扰
4. 传输媒体质量 

<mark>信道带宽</mark> 是信道能通过的最高频率和最低频率之差.  

频率过高--  码间串扰:接收端收到的信号波形<mark>失去了码元之间清晰界限</mark>的现象.  

### 奈氏准则:
在理想低通(无噪声,带宽受限)条件下,为了避免码间串扰,极限码元传输速率为 2W Baud, W是信道带宽,单位:Hz  
$$
理想低通信道下的极限数据传输率 = 2W \log_{2}{V} 
$$
V 为码元的进制

#### 结论
1. 在任何信道中,<mark>码元传输的速率是有上限的</mark> .若传输速率超过此上限,就会出现严重的码间串扰问题.  
2. 信道的 <mark>频带越宽</mark> (能通过的信号高频分量越多),就可以用更高的速率进行码元的有效传输.  
3. <mark>奈氏准则给出了码元传输速率的限制,但并没有对信息传输速率给出限制.</mark>   
4. 由于码元的传输速率受奈氏准则的制约,所以要提高数据的传输速率,就必须设法使每个码元能携带更多个比特的信息量,这就需要多元制的调制方法.  

## 香农定理
### 信噪比
信噪比 = 信号的平均功率 / 噪声的平均功率 
> 记为 S/N ,    度量单位: 分贝dB

$$
信噪比(dB) = 10 \log_{10}{(S/N)}  \quad \quad  \quad    数值等价
$$

###香农定理:
在带宽受限且有噪声的信道中,不产生误差的信息传输速率有上限值.
$$
信道的极限数据传输速率 = W \log_{2}{(1+S/N)}  (b/s) 
$$ 

#### 结论
1. 信道的带宽或信道中的信噪比越大,信息的极限传输速率就越高.  
2. 对一定的传输带宽和一定的信噪比,信息传输速率的上限就确定了.  
3. 只要信息的传输速率低于信道的极限传输速率,就一定能找到某种方法来实现<mark>无差错的传输</mark>.  
4. 香农定理得出的为极限信息传输速率,实际信道能达到的传输速率要比它低不少.  

## 编码与调制
### 基带信号与宽带信号
#### 基带信号:
   将数字信号1和0直接用两种不同的电压表示,再送到<mark>数字信道</mark> 上去传输(基带传输).  
	基带信号就是发出的<mark>直接表达了要传输的信息的信号</mark> ,比如说话的声波. 
#### 宽带信号:  
 将基带信号进行调制后形成的频分复用模拟信号,再传送到<mark>模拟信道</mark> 上传输.(宽带传输).    
 把基带信号经过**载波调制** 后,把信号的**频率范围搬移** 到**较高的频段** 以便在信道中传输.

 在传输距离较近时,计算机网络采用<mark>基带传输</mark> 方式.(近距离衰减小)  
 在传输距离较远时,计算机网络采用<mark>宽带传输</mark> 方式.(远距离衰减大)

 ![](http://picbed.yoyolikescici.cn/uPic/20201222180918.png)

### 数字数据编码为数字信号
#### 非归零编码(NRZ)
高1低0    
没有检错功能,无法传递时钟信号,双方难以同步  

#### (2)曼彻斯特编码
将一个码元分割成两个相等的间隔,前低后高为1,前高后低为0.  
每一个码元中间出现电平跳变,既作为时钟信号,又作数据信号,占用的频带宽度是原始基带宽度的两倍.  

#### (3)差分曼彻斯特编码
常用语局域网传输, 同1异0  
每个码元中间都有一次电平的跳转,可以实现自同步,且抗干扰性好.  

#### (4)归零编码(RZ)
高1低0,每个时钟周期的中间均跳变到低电平.  
因为归零需要占用一部分带宽,传输效率收到影响.  

#### (5)反向不归零编码(NRZI)
信号的翻转代表0,保持不变代表1  
usb2.0 用的就是这个  

#### (6)4B/5B编码
比特流中插入一个额外的比特. 用5个比特来编码4个比特的数据. 编码效率80%.  
![](http://picbed.yoyolikescici.cn/uPic/20201222183334.png)


